// Generated by CoffeeScript 1.3.3
(function() {
  var Backbone, DocPad, createInstance, fsUtil, pathUtil, queryEngine, _ref;

  pathUtil = require('path');

  fsUtil = require('fs');

  _ref = require(__dirname + '/lib/docpad'), DocPad = _ref.DocPad, queryEngine = _ref.queryEngine, Backbone = _ref.Backbone, createInstance = _ref.createInstance;

  module.exports = {
    DocPad: DocPad,
    queryEngine: queryEngine,
    Backbone: Backbone,
    createInstance: createInstance,
    require: function(relativePath) {
      var absolutePath;
      absolutePath = pathUtil.normalize(pathUtil.join(__dirname, relativePath));
      if (absolutePath.replace(__dirname, '') === absolutePath) {
        throw new Error("docpad.require is limited to local docpad files only: " + relativePath);
      }
      try {
        require.resolve(absolutePath);
      } catch (err) {
        absolutePath = pathUtil.join(__dirname, 'lib', relativePath);
        require.resolve(absolutePath);
      }
      return require(absolutePath);
    }
  };

}).call(this);
